%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
%	Notations Mathématiques de base
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\NeedsTeXFormat{LaTeX2e}[1999/01/01]
\ProvidesPackage{Raf_Style}[2012/06/13]
 
%chargement des extensions requises au bon fonctionnement de l'extension et des documents
%\RequirePackage{ifthen}%pour utiliser les booléens, à mettre avec les autres RequirePackage's
%\RequirePackage{xargs}%Pour arguments optionnels multiples
%\RequirePackage{amsfonts}			%Pour faire des maths (ensemble des reels, notamment)
%\RequirePackage{amsmath}		%Plein de trucs, notamment les arcs
%\RequirePackage{mathrsfs}			%Pour faire des maths (notamment le L de la transformée de Laplace)
\RequirePackage{import}
\RequirePackage{graphicx}

%Initialisation des booleens 
%\newboolean{boolRaccourcisMaths}%création du booléen
%\setboolean{boolRaccourcisMaths}{false}%affectation de la valeur false


%déclaration des options de l'extension
%\DeclareOption{}{}
\ProcessOptions

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% 
%commandes et/ou environnements personnalisés
 

%Mise à zéro des variables
%==================================

	\newcommand*	{\partie}		{Sciences Industrielles pour l'Ingénieur}
	\newcommand*	{\titre}		{}
	\newcommand*	{\sousTitre}		{}
	\newcommand*	{\numero}		{}
	\newcommand*	{\auteur}		{Raphaël ALLAIS}
	\newcommand*	{\etablissement}	{Lycée Gustave Eiffel de Dijon}
	\newcommand*	{\discipline}		{Sciences de L'ingénieur}
	\newcommand*	{\classe}		{Classe préparatoire P.T.S.I.}
	\newcommand*	{\anneeScolaire}	{2013 - 2014}
	\newcommand*	{\icone}		{./logo_eiffel.png}
	\newcommand*	{\jour}			{\today}
	\newcommand*	{\competences}		{}

%Page de garde
%============================

%	\subimport{}{}
	%\input{./page_de_garde.tex}
	

%Mise en page des titres de parties
%======================================

	%Sections
	\renewcommand*	{\thesection}	{\Roman{section}}	%Numérotation en chiffres romains
	\titleformat	{\section}[hang]{\LARGE\bfseries}{\thesection.}{1em}{}[\rule{\linewidth}{.5pt}]
	%\newcommand*	{\sectionbreak}	{\clearpage}%Change de page a chaque section
	%\titlespacing*{\section}{0px}{20cm}{\wordsep}

	%Subsection
	\renewcommand*	{\thesubsection}	{\arabic{subsection}}%Numérotation en chiffres arabes
	\titlespacing*	{\subsection}{0cm}{1cm}{0.5cm}
	\titleformat	{\subsection}{\normalfont\large\bfseries}{\thesubsection}{1em}{\underline}[]

	%Subsubsection
	\renewcommand	{\thesubsubsection}	{\alph{subsubsection})}%Numérotation en lettres
	\titlespacing*	{\subsubsection}{1cm}{0.5cm}{0.3cm}


%Table des matieres
%==========================

	%\setlength{\cftbeforesecskip}{0.5ex}
	\newcommand*	{\nocontentsline}[3]{}
	\newcommand*	{\tocless}[2]{\bgroup\let\addcontentsline=\nocontentsline#1{#2}\egroup}
	\renewcommand{\cftsecindent}{0 em}	%Indentation des sections
	\renewcommand{\cftsecnumwidth}{3 em}	%Intentation du titres des sections APRES le numero


%Entete / Pied de page
%===========================

	\pagestyle{fancy}	%On veut utiliser les entetes/pieds
	\rhead{\titre}		%Entete gauche --> Titre du document
	\lhead{\textsc{\partie}}	%Entete droite --> Titre de la sections

	\renewcommand*{\footrulewidth}{1px}
	\lfoot{\etablissement}	%Pied de gauche --> Etablissement
	\cfoot{\thepage\ / \pageref{LastPage}}	%Pied Centre --> n°de page
	\rfoot{\ifthenelse{\equal{\anneeScolaire}{}}{\classe }{\classe \\Année \anneeScolaire}}


%Captions (légendes)
%==========================================
	\captionsetup{	labelsep	=	endash,
			justification	=	centering,
			labelfont	=	bf,
			textfont	=	{small, it}}
	


%Booleen d'affichage vectoriel ou bitmap
\newboolean{imageEnVectoriel}
\setboolean{imageEnVectoriel}{true}	%Petite condition qui choisit entre 2 formats d'image






%\newcommand{\makingOf}[1]{\ifthenelse{\boolean{makingOf}}{}{#1}}









%Mode DISPLAY STYLE dans les tableau
	%%%% debut macro %%%%
	\newenvironment{disarray}%
		{\everymath{\displaystyle\everymath{}}\array}%
		{\endarray}
	%%%% fin macro %%%%
	
	%Pour ne pas apparaitre dans le menu
	%exemple :
	% \tocless\subsection{blabla}



%ITEMIZE
%==========================
	\AtBeginDocument{%
		\renewcommand{\labelitemi}	{\textbullet}
		\renewcommand{\labelitemii}	{$\circ$}%
		\renewcommand{\labelitemiii}	{>}%
		\renewcommand{\labelitemiv}	{-}%
		}



%Page de garde
%=================================
\newcommand*{\includeLogo}{\begingroup \includegraphics{logoeiffel.png} \endgroup}

\newcommand*{\makePageDeGarde}	{\begingroup 
			\begin{titlepage}	%Début de la page de garde
			%=======================================================
				\begin{center} %----------------------------------------
					%partie superieure
					%......................
					\begin{center}
						\begin{tabular}{p{0.2\linewidth}p{0.6\linewidth}}
							\begin{minipage}{\linewidth}
								\begin{center}
									\includeLogo\\[0.5cm]
								\end{center}
							\end{minipage}
						&
							\begin{minipage}{\linewidth}
								\begin{center}
									\textsc{\LARGE \etablissement}\\[1cm]
									\textsc{\Large \classe}\\[0.5cm]
									\textsc{\Large Année \anneeScolaire}\\[1cm]
								\end{center}
							\end{minipage}
						\end{tabular}
					\end{center}
					\vspace{0.6cm}
					%Titre
					%..........................
					\rule{\linewidth}{0.5mm}\\[0.4cm]
					{\textsc{\partie}}\\[0.4cm]
					{ \huge \bfseries \ifthenelse{\equal{\numero}{}}{}{\numero\ -} \titre }\\[0.4cm]
					\rule{\linewidth}{0.5mm}\\[1cm]
					%Sommaire
					%.............................
					\begin{minipage}{0.9\linewidth}
						\tableofcontents
					\end{minipage}
					%Partie inférieur
					%.........................
					\vfill
					%Objectif
					%........................
					%\ifthenelse{\isundefined{\competences}}
					
% 					\ifx \competences \@empty
% 						
% 					\else
% 							\begin{objectif*}
% 								\begin{itemize}
% 									\competences
% 								\end{itemize}
% 							\end{objectif*}
% 					\fi

					\begin{center}
						\begin{minipage}{0.95\linewidth}
								\begin{bclogo}[couleur=fond_objectif,couleurBord=bord_objectif,arrondi=0.2,logo=\bcoutil]{Objectif 132 : 456}
12345698465
								\end{bclogo}
						\end{minipage}
					\end{center}


					%Affiche Version prof
					\afficheVersionProf

					% Bottom of the page
					{\large \jour}
				\end{center}	%-----------------------------------------
			%=======================================================

			


			\end{titlepage}		%Fin de la page de garde
	\endgroup}


\newcommand{\afficheVersionProf}
	{
		%Version prof
			\ifthenelse{\boolean{makingOf}}{\begin{textblock}{2}(1.7,1) %
								\bgroup%
									\Huge%
									\color{red}%
									\rotatebox{20}
										{\begin{minipage}{5cm}
											\centering\fcolorbox{red}{white}{Version Prof}\newline%
											{\fcolorbox{red}{white}{\normalsize\today}\\\ }
										\end{minipage}
										}%
								\egroup%
							\end{textblock}}{}
	}


\newcommand{\makeTitre}
		{
			\begin{center}
				{\textsc{\partie}}\\[0.4cm]
				{ \huge \bfseries \ifthenelse{\equal{\numero}{}}{}{\numero\ -} \titre }\\[0.4cm]
			\end{center}
			\vspace{0.5cm}\hrule
			\par\vspace{0.4cm}
		}

\newcommand{\makeEnteteControle}
		{
			\noindent\fbox{{\Large \textsc{Nom :}\hspace{5cm}}}

			\begin{center}
				\huge \textsc{Contrôle}
			\end{center}
			\vspace{0.5cm}\hrule
			\par\vspace{0.4cm}
		}

\newcommand{\makeEnteteDocumentReponse}
		{
			\noindent\fbox{{\Large \textsc{Nom :}\hspace{5cm}}}

			\begin{center}
				\huge \textsc{Document-Réponse}
			\end{center}
			\vspace{0.5cm}\hrule
			\par\vspace{0.4cm}

			%Version prof
			\afficheVersionProf

		}

\newcommand{\makeEnteteDM}
		{
			%\noindent\fbox{{\Large \textsc{Nom :}\hspace{5cm}}}

			\begin{center}
				\large \textsc{Devoir - Maison}\\
				\huge \titre
			\end{center}
			\vspace{0.5cm}\hrule
			\par\vspace{0.4cm}

		}

\newcommand*{\makePageDeGardeDS}[1]	{\begingroup 
			\begin{titlepage}	%Début de la page de garde
			%=======================================================
				\begin{center} %----------------------------------------
					%partie superieure
					%......................
					\begin{center}
						\jour
					\end{center}
					\vspace{0.7cm}

					%Titre
					%..........................
					\rule{\linewidth}{0.5mm}\\[0.4cm]
					{\textsc{\partie}}\\[0.4cm]
					{ \huge \bfseries \ifthenelse{\equal{\numero}{}}{}{\numero\ -} \titre }
					\ifthenelse{\equal{\sousTitre}{}}{}{\\[0.4cm]\emph{\large\gras{\sousTitre}}}\\[0.4cm]
					\rule{\linewidth}{0.5mm}\\[1cm]

					\begin{center}
						\huge\emph{\gras{Sujet}}
					\end{center}
					%Sommaire
					%.............................
					\setcounter{tocdepth}{1}
					\begin{minipage}{0.9\linewidth}
						\tableofcontents
					\end{minipage}
					
					%Partie inférieur
					%.........................
					\vfill
					{#1}

					\vfill{\large \jour}
				\end{center}	%-----------------------------------------
			%=======================================================
			\end{titlepage}		%Fin de la page de garde
	\endgroup}








% DOC RESSOURCE (a n'utiliser qu'à la fin du document)
%===============================================

\newcommand{\annexe}[1]
		{
			\clearpage
			\newpage
			\section{Annexe : #1}
			%Subsection
			\renewcommand*	{\thesubsection}{DR\arabic{subsection}}%Numérotation en chiffres arabes
			\titlespacing*	{\subsection}{0cm}{1cm}{0.5cm}
			\newcommand*	{\subsectionbreak}	{\clearpage}%Change de page a chaque section
			\titleformat	{\subsection}{\centering\normalfont\Large\bfseries}{\thesubsection\ -- }{0.em}{}[]

		}
\endinput